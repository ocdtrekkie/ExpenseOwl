<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
    <title>ExpenseOwl REST API</title>
    <script>
        function requestIframeURL() {
          var template = "http://username:$API_TOKEN@$API_HOST";
          window.parent.postMessage({renderTemplate: {
            rpcId: "0",
            template: template,
            clipboardButton: 'left'
          }}, "*");
        }

        document.addEventListener("DOMContentLoaded", requestIframeURL);

        var copyIframeURLToElement = function(event) {
          if (event.data.rpcId === "0") {
            if (event.data.error) {
            console.log("ERROR: " + event.data.error);
            } else {
            var el = document.getElementById("offer-iframe");
            el.setAttribute("src", event.data.uri);
            }
          }
        };

        window.addEventListener("message", copyIframeURLToElement);
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1 align="center">ExpenseOwl</h1>
            <div class="nav-bar">
                <a href="/" class="view-button">Dashboard</a>
                <a href="/table" class="view-button">Table View</a>
                <a href="/api-setup" class="view-button active">REST API</a>
            </div>
        </header>

        <div class="form-container">
	    <h2>API Setup</h2>
            Use the following URL as your base for <a href="https://github.com/Tanq16/ExpenseOwl?tab=readme-ov-file#rest-api" target="_blank">API calls</a>:
            <br/>
            <br/>
            <iframe style="width: 100%; height: 55px; margin: 0; border: 0;" id="offer-iframe"></iframe>
        </div>
</body>
</html>
